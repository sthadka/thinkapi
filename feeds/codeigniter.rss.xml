<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>thinkAPI</title><link>http://thinkapi.com/</link><description></description><atom:link href="http://thinkapi.com/feeds/codeigniter.rss.xml" rel="self"></atom:link><lastBuildDate>Thu, 23 Oct 2008 19:19:00 +0200</lastBuildDate><item><title>Codeigniter: Separating reads and writes for scaling MySQL</title><link>http://thinkapi.com/blog/codeigniter-separating-reads-and-writes-for-scaling-mysql/</link><description>&lt;p&gt;Generally websites average a ratio of 9:1 or more for reads:writes for their
applications which makes MySQL replication as one of the ways to scale you web
application. The simplest configuration is to separate reads and writes with
all the reads coming from the slave servers.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MySQL Database replication&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We can implement this in &lt;a href="http://codeigniter.com/"
target="_blank"&gt;codeigniter&lt;/a&gt; using database groups.  Below is a sample
execution.&lt;/p&gt;
&lt;p&gt;Create two active groups - one for read and one for write.&lt;/p&gt;
&lt;p&gt;File: system/application/config/database.php&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;$active_group = &amp;#39;write&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$active_record = TRUE;&lt;/span&gt;

&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;hostname&amp;#39;] = &amp;#39;localhost&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;username&amp;#39;] = &amp;#39;root&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;password&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;database&amp;#39;] = &amp;#39;read_database_name&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;dbdriver&amp;#39;] = &amp;#39;mysql&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;dbprefix&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;pconnect&amp;#39;] = TRUE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;db_debug&amp;#39;] = FALSE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;cache_on&amp;#39;] = FALSE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;cachedir&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;char_set&amp;#39;] = &amp;#39;utf8&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;read&amp;#39;][&amp;#39;dbcollat&amp;#39;] = &amp;#39;utf8_general_ci&amp;#39;;&lt;/span&gt;

&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;hostname&amp;#39;] = &amp;#39;localhost&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;username&amp;#39;] = &amp;#39;root&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;password&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;database&amp;#39;] = &amp;#39;write_database_name&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;dbdriver&amp;#39;] = &amp;#39;mysql&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;dbprefix&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;pconnect&amp;#39;] = TRUE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;db_debug&amp;#39;] = FALSE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;cache_on&amp;#39;] = FALSE;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;cachedir&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;char_set&amp;#39;] = &amp;#39;utf8&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;$db[&amp;#39;write&amp;#39;][&amp;#39;dbcollat&amp;#39;] = &amp;#39;utf8_general_ci&amp;#39;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create separate database connections to access read and write databases
separately where needed (constructor is generally a good place for this).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;$read_db = $this-&amp;gt;load-&amp;gt;database(&amp;#39;read&amp;#39;, TRUE);&lt;/span&gt;
&lt;span class="x"&gt;$write_db = $this-&amp;gt;load-&amp;gt;database(&amp;#39;write&amp;#39;, TRUE);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can now go about running queries in the usual way.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;/* For reads */&lt;/span&gt;
&lt;span class="x"&gt;$query = $read_db-&amp;gt;get(&amp;#39;table_name&amp;#39;);&lt;/span&gt;

&lt;span class="x"&gt;foreach ($query-&amp;gt;result() as $row)&lt;/span&gt;
&lt;span class="x"&gt;{&lt;/span&gt;
&lt;span class="x"&gt;    echo $row-&amp;gt;title;&lt;/span&gt;
&lt;span class="x"&gt;}&lt;/span&gt;

&lt;span class="x"&gt;/* For writes */&lt;/span&gt;
&lt;span class="x"&gt;$data = array(&lt;/span&gt;
&lt;span class="x"&gt;        &amp;#39;title&amp;#39; =&amp;gt; $title,&lt;/span&gt;
&lt;span class="x"&gt;        &amp;#39;name&amp;#39; =&amp;gt; $name,&lt;/span&gt;
&lt;span class="x"&gt;        &amp;#39;date&amp;#39; =&amp;gt; $date&lt;/span&gt;
&lt;span class="x"&gt;        );&lt;/span&gt;

&lt;span class="x"&gt;$write_db-&amp;gt;insert(&amp;#39;mytable&amp;#39;, $data);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In case you want to try this on an application you are already running, you
can leave the &amp;#8220;default&amp;#8221; connection group intact and create only
the &amp;#8220;read&amp;#8221; connection group. Use it where you think you are
running read heavy queries.&lt;/p&gt;
&lt;h2&gt;Old Comments&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Stinky Tofu&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is an interesting approach.  Just wondering though, if you have a master
db that is for writes only and a slave db for reads only, then instead of
asking the programmer to specify which database to read/write from/to in their
code, why not set it up so that whenever I call $db-&amp;gt;insert,
$db-&amp;gt;update, or $db-&amp;gt;delete, then automatically use the master db to
perform the write, if I am calling $db-&amp;gt;query, then the code should be
smart enough to connect to the slave db for the reads.  Would this be a safer
approach?  It would help prevent human error.  Curious to find out what you
think about this approach.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Sukumar Yethadka&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;@Stinky Tofu
Yes, that would be quite a good approach and can be implemented
just by extending the database model.  My preference is slightly different
though. I like to use fat controllers and thin models (most of the logic is in
the controller). Because of this, I have a base model where I have all the
commonly used methods defined (different way of CRUD) and all other models
just extend from it. This way I don&amp;#8217;t need to decide what query goes
where everyday but, just at the time of writing the model.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Naren&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Very interesting take. Why don&amp;#8217;t you create a database helper/extend the
database class to abstract away the need to keep track of which DB
you&amp;#8217;re supposed to write to, and read from.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Brad Proctor&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You really need to be careful with this.  What happens if you make an insert
and the user is redirected to see the results and a select is occurs of what
was just inserted, but the the master hasn&amp;#8217;t replicated yet.  The user
sees nothing.  To fix this, that select needs to occur on the master.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sukumar Yethadka</dc:creator><pubDate>Thu, 23 Oct 2008 19:19:00 +0200</pubDate><guid>tag:thinkapi.com,2008-10-23:blog/codeigniter-separating-reads-and-writes-for-scaling-mysql/</guid><category>codeigniter</category><category>replication</category></item><item><title>Making Codeigniter clean URLs cleaner</title><link>http://thinkapi.com/blog/making-codeigniter-clean-urls-cleaner/</link><description>&lt;p&gt;Usually when working with codeigniter you come across the use case where you
need to remove the extra "index" appearing in the URL for purposes
ranging from shorter URLs to SEO.&lt;/p&gt;
&lt;p&gt;For example,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Current URL style:
http://example.com/controller/method/category1/category2/page-name
Target URL style:
http://example.com/category1/category2/page-name.html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, the difference in the target URL is the absence of the
controller name and the method name and the presence of the extension ".html".
Now, lets see how to achieve this and why the extra extension is required.&lt;/p&gt;
&lt;p&gt;Below is my version of .htaccess.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;RewriteEngine on

RewriteRule ^([a-z0-9_-]+)\.html$ index.php/page/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|asset|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The line that is extra is 3 which redirects all the requests for ".html"; files to the controller named "page".&lt;/p&gt;
&lt;p&gt;Now, lets look at the page controller which will handle these requests.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nb"&gt;defined&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;BASEPATH&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;No direct script access allowed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Page&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="nx"&gt;Controller&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;__construct&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="na"&gt;Controller&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;_remap&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nv"&gt;$segment_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;total_segments&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="nv"&gt;$segments&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;segment_array&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$segment_count&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Page Title&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;view&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;home&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;elseif&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$segment_count&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;// Single page&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nv"&gt;$page_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$segments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="c1"&gt;// Handle the page request&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;elseif&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$segment_count&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;// Page with category&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;


            &lt;span class="nv"&gt;$category&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$segments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="nv"&gt;$page_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$segments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="c1"&gt;// Handle the category + page request&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In this way you can have pages with smaller and cleaner URLs.&lt;/p&gt;
&lt;p&gt;Tips:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;You can use any extension you like. e.g; in case you have static HTML files to server, you can use the extension ".html" for static and ".htm" for non-static files.&lt;/li&gt;
&lt;li&gt;You can have any number of URL stubs before the ".html" extension and you can access all these stubs in the controller.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cons:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The URL needs an extra extension.&lt;/li&gt;
&lt;li&gt;Only one controller per extension.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Do let me know what you think about this or if there is any way to improve on this.&lt;/p&gt;
&lt;h2&gt;Old comments&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Ruben MÃ¼ller&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Why don't you use the routes.php?&lt;/p&gt;
&lt;p&gt;&lt;a href="http://codeigniter.com/user_guide/general/routing.html" rel="nofollow"&gt;http://codeigniter.com/user_guide/general/routing.html&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Bob&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I'm wondering why you would want the extension (.html, .htm, .php, whatever). If you're looking for shorter, cleaner URLs, why not:&lt;/p&gt;
&lt;p&gt;Current: &lt;a href="http://example.com/controller/method/category1/category2/page-name" rel="nofollow"&gt;http://example.com/controller/method/category1/category2/page-name&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Target : &lt;a href="http://example.com/controller/method/category1/category2" rel="nofollow"&gt;http://example.com/controller/method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;or to really chop it up:&lt;/p&gt;
&lt;p&gt;Target : &lt;a href="http://example.com/category1/category2" rel="nofollow"&gt;http://example.com/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I suppose it makes a difference if your controller/method names are married to your site structure (i.e., &lt;a href="http://example.com/products/view/cat1/cat2" rel="nofollow"&gt;http://example.com/products/view/cat1/cat2&lt;/a&gt;) or not (&lt;a href="http://example.com/whichpage/displayproducts/cat1/cat2" rel="nofollow"&gt;http://example.com/whichpage/displayproducts/cat1/cat2&lt;/a&gt;) but at least to the way I code, I'm not seeing the benefits of this method.&lt;/p&gt;
&lt;p&gt;Cheers,
Bob&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Sukumar Yethadka&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;@Ruben
Using routes is an option. But in order to get URLs like&lt;/p&gt;
&lt;p&gt;&lt;a href="http://example.com/category1/category2/page-name" rel="nofollow"&gt;http://example.com/category1/category2/page-name&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;without the controller name and the method name ("index" for example); the route would be (Please note that I haven't tested this below route)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;$route[&amp;#39;(:any)&amp;#39;] = &amp;#39;page/$1&amp;#39;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then you would be able to use any other controller since all the requests are routed to "page" controller.
Do let me know if there is a better routing method I missed.&lt;/p&gt;
&lt;p&gt;@Bob
The main reasons I didn't want&lt;/p&gt;
&lt;p&gt;Target : &lt;a href="http://example.com/controller/method/category1/category2" rel="nofollow"&gt;http://example.com/controller/method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;is because my URLs would have looked like&lt;/p&gt;
&lt;p&gt;&lt;a href="http://example.com/page/index/category1/category2" rel="nofollow"&gt;http://example.com/page/index/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;AFAIK, google considers the URL segments to be more important the closer they are to the domain name.&lt;/p&gt;
&lt;p&gt;Yes,
Target : &lt;a href="http://example.com/category1/category2" rel="nofollow"&gt;http://example.com/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;is quite possible and using routes at that. However, I think we wouldn' t be able to use other controllers because of this (Unless we have some filter that checks for the existence of the controller and then the category). Using extensions helps to map a particular extension to a specific controller whithout affecting any other controllers.&lt;/p&gt;
&lt;p&gt;One of the main use cases I can think of is for a small blog similar to wordpress.&lt;/p&gt;
&lt;p&gt;Hope that makes sense.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Henry Weismann&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;How about:&lt;/p&gt;
&lt;p&gt;Current Url: &lt;a href="http://example.com/controller-method/category1/category2" rel="nofollow"&gt;http://example.com/controller-method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OR&lt;/p&gt;
&lt;p&gt;Current Url: &lt;a href="http://example.com/subfolder-controller-method/category1/category2" rel="nofollow"&gt;http://example.com/subfolder-controller-method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;is because my URLs would have looked like&lt;/p&gt;
&lt;p&gt;Target Url: &lt;a href="http://example.com/index.php/controller/method/category1/category2" rel="nofollow"&gt;http://example.com/index.php/controller/method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OR&lt;/p&gt;
&lt;p&gt;Target Url: &lt;a href="http://example.com/index.php/controller/method/index/category1/category2" rel="nofollow"&gt;http://example.com/index.php/controller/method/index/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|asset|robots\.txt)
RewriteRule ^([^/.]+)-([^/.]+)-([^/.]+)/(.*)$ index.php/$1/$2/$3/$4 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|asset|robots\.txt)
RewriteRule ^([^/.]+)-([^/.]+)/(.*)$ index.php/$1/$2/$3 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|asset|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Using Routes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;$route[&amp;#39;^([^/.]+)-([^/.]+)/(.*)&amp;#39;] = &amp;quot;$1/$2/$3&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;$route[&amp;#39;^([^/.]+)-([^/.]+)-([^/.]+)/(.*)&amp;#39;] = &amp;quot;$1/$2/$3/$4&amp;quot;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I have no idea if that will work as I just wrote it now.  Feel free to test it.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Henry Weismann&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Should read:
Target Url: &lt;a href="http://example.com/index.php/controller/method/category1/category2" rel="nofollow"&gt;http://example.com/index.php/controller/method/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OR&lt;/p&gt;
&lt;p&gt;Target Url: &lt;a href="http://example.com/index.php/subfolder/controller/method/index/category1/category2" rel="nofollow"&gt;http://example.com/index.php/subfolder/controller/method/index/category1/category2&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Sukumar Yethadka&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;@Henry,
Your code looks good, but my aim is to remove the controller and the method name from the URL.
Target URL style: &lt;a href="http://example.com/category1/category2/page-name" rel="nofollow"&gt;http://example.com/category1/category2/page-name&lt;/a&gt;
Your method is useful to merge the forward slashes in the URL.&lt;/p&gt;
&lt;p&gt;Useful code nevertheless, thanks!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Sean&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;One problem I notice about CI Urls is how they look inside of google on your website snippet. They all include a ../ inside the URL have you noticed this and do you have any idea how to remove that ../ it wastes space and is distracting.
Thanks,
Sean&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Sukumar Yethadka&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;@Sean,
I didn't really get what you are referring to. You can check the usage of this code snippet on &lt;a href="http://www.fourseasonsvineyards.com/" rel="nofollow"&gt;http://www.fourseasonsvineyards.com/&lt;/a&gt;
As you can see there are no "../" in the URLs anywhere. Do let me know if I am missing something.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Sukumar Yethadka</dc:creator><pubDate>Tue, 07 Oct 2008 19:19:00 +0200</pubDate><guid>tag:thinkapi.com,2008-10-07:blog/making-codeigniter-clean-urls-cleaner/</guid><category>codeigniter</category></item></channel></rss>